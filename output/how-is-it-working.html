
<!DOCTYPE html>
<html lang="en">
<head>
<title>How is it Working - Christian Kongsgaard</title>

    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:regular,bold">
    <link rel="stylesheet" type="text/css" href="./theme/css/w3.css">
    <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
    <link rel="stylesheet" type="text/css" href="./theme/css/jqcloud.css">
    <link rel="stylesheet" type="text/css" href="./theme/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="./theme/css/shariff.min.css">
    <link rel="stylesheet" type="text/css" href="./theme/css/pygments-highlight-github.css">

    <!-- JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="./theme/js/jqcloud.min.js"></script>

     <!-- Meta -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="HandheldFriendly" content="True" />

    <meta name="author" content="Christian Kongsgaard" />
    <meta name="description" content="A short post on how the Livestock Template Method is working." /> 
    <meta name="keywords" content="livestock, python, grasshopper"> 

    <!-- Facebook OpenGraph -->
    <meta property="og:site_name" content="Christian Kongsgaard">
    <meta property="og:title" content="How is it Working - Christian Kongsgaard" />
    <meta property="og:description" content="A short post on how the Livestock Template Method is working." />
    <meta property="og:image" content="./images/GH+Py.png">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="./how-is-it-working.html" />
    <meta property="og:locale" content="de_DE" />
    <meta property="og:locale:alternate" content="en_US" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="How is it Working - Christian Kongsgaard">
    <meta name="twitter:description" content="A short post on how the Livestock Template Method is working.">
    <meta name="twitter:image" content="./images/GH+Py.png">
</head>
<body>
  <div class="w3-row w3-card w3-white">
    <header id=banner>
       <!-- AUTHOR INITIALS-->
      <a href="." id=logo title="Home">CK</a>
      <nav id="menu">
        <ul>
          <li><a href="./pages/LIVESTOCK.html">LIVESTOCK</a></li>
          <li><a href="./pages/portfolio.html">PORTFOLIO</a></li>
          <li><a href="./pages/tutorials.html">TUTORIALS</a></li>
          <li style="font-weight: bold;"><a href="./category/posts.html">posts</a></li>
        </ul>
      </nav>
    </header>
  </div>
<br>
<article>
  <header class="w3-container col-main">
    <h1>How is it Working</h1>
    <div class="post-info">
      <div class="w3-opacity w3-margin-right w3-margin-bottom" style="flex-grow: 1;">
        <span>  Posted on ma 30 april 2018 in <a href="./category/posts.html" style="font-style: italic">posts</a>

        </span>
      </div>
      <div id="article-tags">
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="./tag/livestock.html" title="  All posts about Livestock
">#livestock</a>
        </span>
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="./tag/python.html" title="  All posts about Python
">#python</a>
        </span>
        <span class="w3-tag w3-light-grey w3-text-red w3-hover-red">
          <a href="./tag/grasshopper.html" title="  All posts about Grasshopper
">#grasshopper</a>
        </span>
      </div>
    </div>
  </header>
  <br>
  <div class="headerimage-article">
    <img src="/images/GH+Py.png" style="width: 100%;">
  </div>
  <div class="col-main w3-container">
    <main id="article-content">
      <p>Livestock is an Open Source lightweight CPython package, linking IronPython in Rhino3d+Grasshopper3d and Revit+Dynamo to CPython.
Originally created by Christian Kongsgaard and Kristoffer Negendahl. Livestock3D is allowing people <em>"to extend the
scripting/coding capabilities beyond IronPython by tunneling into the CPython ecosystem with the ambition to make faster
and more open building/site performance analysis tools for Civil and Environmental Engineering disciplines."</em></p>
<p>Livestock is a project in continuous development by Civil engineering researchers and students from the Section of
Building Design at <a href="http://www.bygningsdesign.byg.dtu.dk/english">DTU</a>.</p>
<h2>Why Use CPython?</h2>
<p>The Grasshopper Python Script component runs <a href="http://ironpython.net/">IronPython</a>, which is an implementation of 
Python for the .NET framework. IronPython comes as Python 2.7 and has been without development for some time. 
Standard <a href="https://www.python.org/">Python</a>, from here on named CPython, is well maintained and is at the time of this writing on 
version 3.6, although a beta version of 3.7 has been released. CPython has undergone a lot development that IronPython 
still has to catch up to, including a whole bunch of new features. Furthermore, are the packages on 
<a href="https://www.pypi.org/">PyPI</a> mainly targeting CPython and many cannot be used in IronPython. This means that packages 
such as NumPy, SciPy, Pandas and Matplotlib, among more than 130,000 others, can not be used. This decreases the 
usability of the IronPython as a general-purpose implementation of Python.</p>
<h2>Grasshopper to CPython</h2>
<p>In order to leave Grasshopper and utilize the full functionality of CPython, the Livestock Template Method is used. 
The method works by writing templates from the Grasshopper Python Script followed by spawning a CPython subprocess, 
which executes the template.</p>
<p>In the Grasshopper environment data are collected and organized and saved as a .xml or .txt file for information or 
.obj file for geometry. Together with the data files a Python file is written, which contains instructions on how to 
process the data. Two things will happen:</p>
<p>1)  Python will execute the instruction in the Python file and save the results as .xml, .txt and, or .obj files, 
thereafter Grasshopper will read them.
2)  The instructions in the Python file is to send the files to another computer for processing. </p>
<p><img alt="alt text" src="./images/GH+Py+SSH.png"></p>
<p>In that case two Python files are send from Grasshopper: one that tells Python to send on the files and one with 
instructions on how to process the files as in case 1. Python will establish a SSH connection (Secure Shell) to the 
remote computer, wherethrough the files will be send. The remote computer will execute the Python instruction file and 
the result files will be send back through the SSH connection, afterwards it will be closed. The local Python will then 
save the result files to the right place, where Grasshopper is able to read the files. </p>
<p>The reason for sending the files forward to remote processing is to reduce processing time, 
as most cases are quite computational heavy. Furthermore, it is freeing your work station, as it is not pinned down from 
the workload, while the computation is ongoing. This is desirable especially in a professional context.</p>
<h2>Templates</h2>
<p>The templates works as the link between Grasshopper and CPython. They are written by the Grasshopper component, where after
Grasshopper spawns a subprocess, which makes CPython execute the template. The template itself is basically just a file, which
imports the CPython library of Livestock and calls a function from it. The function call is then executed in pure CPython,
enabling the user to take full advantage of it.</p>
<p><img alt="alt text" src="./images/Livestock-Template-Method.png"></p>
<h2>SSH Tunnel</h2>
<p>The SSH functionality works like the template method. Livestock CMF Solver is the only component that is currently 
utilizing the SSH method. The component takes different inputs and has some different internal processing but the core 
functionality – point 3 and 4 from above – is still the same. With a minor change the SSH functionality can be implemented: 
When the files are written, not only the data files and the template file are written but also a SSH template and a 
SSH input file. 
The SSH template file is similar to any other template file of this thesis; it has a single function call – 
ssh_connection(). ssh_connection reads the data in the SSH input file and opens the SSH tunnel, transfers the files, 
makes the remote machine execute the template file, and transfers the results back and cleans up the remote folder. 
The SSH input file contains all the information needed for this and only a few lines of information are needed:</p>
<ul>
<li>IP address of the remote machine.</li>
<li>Port where through the connection should be made.</li>
<li>Username and password for the remote machine.</li>
<li>Filenames of the files that should be transferred i.e. the data files and the template.</li>
<li>Filename of the file which should be run of the remote machine i.e. the template.</li>
<li>Filenames of what files should be returned i.e. the result files.</li>
</ul>
<p>When the results are back the SSH connection will be closed and the SSH template will be terminated and the CPython 
part of the Livestock CMF Solve component will be finished.</p>
    </main>
    <br>
    <footer>
      <div class="adjust-width">
        <div id="author-block" class="w3-light-grey w3-border">
            <img style="width: 35px; height: 56px; margin-left:50px;" src="theme/images/bookmark-red.png" alt="bookmark"></img>
            <div id="author-info">
                <a href="./authors.html#christian-kongsgaard"><img style="width: 60px; height: 60px;" src="/authors/christian-kongsgaard.png" onerror="this.src='/theme/images/avatar.png'"></img>
                </a>
                <div style="margin-left: 20px; margin-top: 15px;">
                    <a href="./authors.html#christian-kongsgaard"><span id="author-name" class="w3-hover-text-dark-grey">Christian Kongsgaard</span></a>
                    <p id="author-story" style="max-width: 500px;">I'm an architectural engineer focused on sustainable parametric design and building performance simulations. I use Python and Grasshopper to simulate outdoor thermal comfort, building energy, and daylight.</p>
                </div>
            </div>
        </div>
      </div>
      <br>
      
      <p style="font-size:10pt; font-style: italic;">  Did you like this article? Share it with your friends!
</p>
      <div class="shariff" data-services="[&quot;facebook&quot;,&quot;linkedin&quot;,&quot;mail&quot;]" data-title="How is it Working - Christian Kongsgaard" data-mail-url="mailto:" data-mail-subject="  Interesting post on Christian Kongsgaard
" data-mail-body="  Hey, I just read this article and really enjoyed it. I'm sure you also like it ;) ./how-is-it-working.html
" >
      </div>
      <br>
    </footer>
  </div>
</article>
<br>
  <footer id="contentinfo">
    <div id="blogroll" class="w3-row">
        <div class="blogroll-block w3-col l3 m3 s6">
            <div>
                <h6>  Categories
</h6>
                <ul>
                    <li class=""><a href="./category/posts.html">posts<a></li>
                    <li class="empty"></li>
                    <li class="empty"></li>
                    <li class="empty"></li>
                </ul>
            </div>
        </div>
    <div class="blogroll-block w3-col l3 m3 s6">
      <div>
        <h6>Top Tags</h6>
        <ul>
          <!-- Print the four most popular tags, sorted automatically with the setting TAG_CLOUD_SORTING = 'size' in pelicanconf.py -->
          <li class=""><a href="./tag/ladybug-tools.html"> #ladybug tools ()</a></li>
          <li class=""><a href="./tag/indoor-comfort.html"> #indoor comfort ()</a></li>
          <li class=""><a href="./tag/my-first-component.html"> #my first component ()</a></li>
          <li class=""><a href="./tag/run-off.html"> #run-off ()</a></li>
        </ul>
      </div>
    </div>
    <div class="blogroll-block w3-col l3 m3 s6">
      <div>
          <h6><a href="./authors.html">  Authors
</a></h6>
          <ul>
              <!--  -->
              <li class=""><a href="./authors.html">Christian Kongsgaard</a></li>
              <!-- <li class=""><a href="./authors.html#christian-kongsgaard">Christian Kongsgaard</a></li> -->
               <li class="empty"></li>
              <li class="empty"></li>
              <li class="empty"></li>
          </ul>
      </div>
    </div>
      <div class="blogroll-block w3-col l3 m3 s6">
          <div>
              <h6>Social Media</h6>
              <ul>
                  <li><a class="sc-linkedin" href="https://www.linkedin.com/in/christian-kongsgaard-33825b78/" target="_blank"><span style="text-transform: capitalize;">linkedin</span> <i class="fa fa-linkedin"></i></a></li>
                  <li><a class="sc-github" href="https://github.com/ocni-dtu" target="_blank"><span style="text-transform: capitalize;">github</span> <i class="fa fa-github"></i></a></li>
                  <li class="empty"></li>
                  <li class="empty"></li>
              </ul>
          </div>
      </div>
    </div>
    <div id="contact">
        <ul>
            <li><a href="./legal.html">  About | Privacy
</a></li>
        </ul>
    </div>
    <div id="copyright" class="w3-center w3-small w3-text-grey w3-padding-48">
        <span>Made with ❤️ by FK | Powered by <a href="http://getpelican.com" target="_blank"><u>Pelican</u></a> and <a href="https://github.com/art1fa/minimalX" target="_blank"><u>minimalX</u></a>        </span>
    </div>
  </footer>
<script src="./theme/js/shariff.min.js"></script>
</body>
</html>